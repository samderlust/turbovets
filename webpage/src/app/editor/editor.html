<div class="container mx-auto p-4 md:p-6 h-screen flex flex-col">
  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 md:mb-6 gap-2 sm:gap-0">
    <h2 class="text-xl md:text-2xl font-bold">Markdown Editor</h2>
    <div class="flex space-x-2">
      <button (click)="save()"
        class="px-3 py-2 md:px-4 md:py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm md:text-base">
        Save
      </button>
    </div>
  </div>

  @if (savedMessage()) {
  <div class="mb-3 md:mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded text-sm">
    Content saved successfully!
  </div>
  }

  <!-- Mobile Layout (Tabs) -->
  <div class="md:hidden flex-1 flex flex-col min-h-0">
    <!-- Tab Navigation -->
    <div class="flex bg-gray-100 rounded-t-lg mb-0">
      <button (click)="setActiveTab('editor')"
        [class]="activeTab() === 'editor' ? 'bg-white border-b-2 border-blue-500 text-blue-600' : 'text-gray-600 hover:text-gray-800'"
        class="flex-1 px-4 py-3 text-sm font-medium rounded-tl-lg transition-colors">
        Editor
      </button>
      <button (click)="setActiveTab('preview')"
        [class]="activeTab() === 'preview' ? 'bg-white border-b-2 border-blue-500 text-blue-600' : 'text-gray-600 hover:text-gray-800'"
        class="flex-1 px-4 py-3 text-sm font-medium rounded-tr-lg transition-colors">
        Preview
      </button>
    </div>

    <!-- Tab Content -->
    <div class="flex-1 bg-white rounded-b-lg shadow border border-t-0 min-h-0">
      <!-- Editor Tab -->
      @if (activeTab() === 'editor') {
      <div class="h-full flex flex-col">
        <textarea [value]="content()"
          (input)="updateContent($event)"
          class="flex-1 w-full p-4 border-0 resize-none focus:ring-2 focus:ring-blue-500 rounded-b-lg text-sm"
          placeholder="Write your markdown content here...">
          </textarea>
      </div>
      }

      <!-- Preview Tab -->
      @if (activeTab() === 'preview') {
      <div class="h-full p-4 overflow-y-auto prose prose-sm max-w-none"
        [innerHTML]="renderedContent()">
      </div>
      }
    </div>
  </div>

  <!-- Desktop Layout (Always Horizontal) -->
  <div class="hidden md:block flex-1">
    <div class="h-full flex space-x-4">
      <!-- Editor Panel - Fixed at 30% width -->
      <div class="editor-panel-horizontal bg-white rounded-lg shadow border">
        <div class="bg-gray-50 px-4 py-2 border-b rounded-t-lg">
          <h3 class="font-semibold text-gray-700">Markdown Editor</h3>
        </div>
        <textarea [value]="content()"
          (input)="updateContent($event)"
          class="w-full h-full p-4 border-0 resize-none focus:ring-2 focus:ring-blue-500 rounded-b-lg"
          placeholder="Write your markdown content here...">
        </textarea>
      </div>

      <!-- Preview Panel -->
      <div class="flex-1 bg-white rounded-lg shadow border min-h-0">
        <div class="bg-gray-50 px-4 py-2 border-b rounded-t-lg">
          <h3 class="font-semibold text-gray-700">Preview</h3>
        </div>
        <div class="p-4 h-full overflow-y-auto prose max-w-none"
          [innerHTML]="renderedContent()">
        </div>
      </div>
    </div>
  </div>

  <!-- Markdown Toolbar -->
  <div class="mt-3 md:mt-4 flex flex-wrap gap-1 md:gap-2 p-2 md:p-3 bg-gray-100 rounded-lg">
    <button (click)="insertMarkdown('**', '**')"
      class="px-2 py-1 md:px-3 md:py-1 bg-white rounded shadow hover:bg-gray-50 text-sm"
      title="Bold">
      <strong>B</strong>
    </button>
    <button (click)="insertMarkdown('*', '*')"
      class="px-2 py-1 md:px-3 md:py-1 bg-white rounded shadow hover:bg-gray-50 text-sm"
      title="Italic">
      <em>I</em>
    </button>
    <button (click)="insertMarkdown('`', '`')"
      class="px-2 py-1 md:px-3 md:py-1 bg-white rounded shadow hover:bg-gray-50 font-mono text-sm"
      title="Code">
      &lt;/&gt;
    </button>
    <button (click)="insertMarkdown('## ', '')"
      class="px-2 py-1 md:px-3 md:py-1 bg-white rounded shadow hover:bg-gray-50 text-sm"
      title="Heading">
      H2
    </button>
    <button (click)="insertMarkdown('- ', '')"
      class="px-2 py-1 md:px-3 md:py-1 bg-white rounded shadow hover:bg-gray-50 text-sm"
      title="List">
      â€¢
    </button>
    <button (click)="insertMarkdown('[', '](url)')"
      class="px-2 py-1 md:px-3 md:py-1 bg-white rounded shadow hover:bg-gray-50 text-sm"
      title="Link">
      ðŸ”—
    </button>
  </div>
</div>